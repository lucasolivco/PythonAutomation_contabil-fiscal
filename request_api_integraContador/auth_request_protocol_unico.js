const axios = require('axios');

// Configurações
const API_URL = 'https://gateway.apiserpro.serpro.gov.br/integra-contador/v1/Apoiar';
const ACCESS_TOKEN = 'eyJ4NXQiOiJNalJqWkRRMU1EQmtPR1JqWW1Jek9EVmxaRFEzWkdFeU1EVTVabU5rWldVeU9XUmhPRFZpTnciLCJraWQiOiJNRGN5WVdFNU16ZzVaVFJrT1dVME1XWTBNVE0xTkdJMllqbG1OVFZrT0dJd01UVmlORGRpWldJM1pEUmpZVEpsTTJaa05Ua3dNR1F3TWpZeVlXTmxNQV9SUzI1NiIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhdXRlbnRpa3VzIiwiYXV0IjoiQVBQTElDQVRJT04iLCJhdWQiOiJPVEpqd1dscnJSNFJmRENDNXBKMTV4X09KaGNhIiwibmJmIjoxNzMzMTQ0NzMwLCJhenAiOiJPVEpqd1dscnJSNFJmRENDNXBKMTV4X09KaGNhIiwic2NvcGUiOiJkZWZhdWx0IiwiaXNzIjoiaHR0cHM6XC9cL3B1Ymxpc2hlci5hcGlzZXJwcm8uc2VycHJvLmdvdi5icjo0NDNcL29hdXRoMlwvdG9rZW4iLCJyZWFsbSI6eyJzaWduaW5nX3RlbmFudCI6ImNhcmJvbi5zdXBlciJ9LCJleHAiOjE3MzMxNDgzMzAsImlhdCI6MTczMzE0NDczMCwianRpIjoiNzhjYTBkZWEtNWM3Zi00ZWJlLThmZTAtNjJhMTJlNmFhZjE3In0.mqUUcEulcYQkzbwZAqjUgp90VBo12-_0tDRkHUIKaB85Teso80DVVmYY6KJpZnG49JSwLmDImNwDHd9Pru5xWdszNcKU_OVIoIn8sg_HU5ioydtiFXF35n5cXM2h7_7-3O__XXab7Lqqk64L9XcRrofpgN0Jvrh-hLcQHnRD-8ipIW9jTOabVjVJ21-I5tu2-Q7NRwApJnaPuIVqTOegH_cOoOLkDqkVGefUG6YN2Yi_YenNCNwI-svSFw-P3ZxGTRVobxIQTSX4cxWgCsUi4p8XG8sf9DC9oCURZzJAPZ1er3bZLNiGwwfNuNde98lFahXZeAneAkaIBqZR9wo0XA'; // Substitua pelo token de acesso real
const JWT_TOKEN = 'eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIwNjMxMDcxMTAwMDE0OSIsInRpcG8iOiJQSiIsImFjY2VzcyI6ImV5SjROWFFpT2lKTmFsSnFXa1JSTVUxRVFtdFBSMUpxV1cxSmVrOUVWbXhhUkZFeldrZEZlVTFFVlRWYWJVNXJXbGRWZVU5WFVtaFBSRlpwVG5jaUxDSnJhV1FpT2lKTlJHTjVXVmRGTlUxNlp6VmFWRkpyVDFkVk1FMVhXVEJOVkUweFRrZEpNbGxxYkcxT1ZGWnJUMGRKZDAxVVZtbE9SR1JwV2xkSk0xcEVVbXBaVkVwc1RUSmFhMDVVYTNkTlIxRjNUV3BaZVZsWFRteE5RVjlTVXpJMU5pSXNJbUZzWnlJNklsSlRNalUySW4wLmV5SnpkV0lpT2lKaGRYUmxiblJwYTNWeklpd2lZWFYwSWpvaVFWQlFURWxEUVZSSlQwNGlMQ0poZFdRaU9pSlBWRXBxZDFkc2NuSlNORkptUkVORE5YQktNVFY0WDA5S2FHTmhJaXdpYm1KbUlqb3hOek16TVRRME56TXdMQ0poZW5BaU9pSlBWRXBxZDFkc2NuSlNORkptUkVORE5YQktNVFY0WDA5S2FHTmhJaXdpYzJOdmNHVWlPaUprWldaaGRXeDBJaXdpYVhOeklqb2lhSFIwY0hNNlhDOWNMM0IxWW14cGMyaGxjaTVoY0dselpYSndjbTh1YzJWeWNISnZMbWR2ZGk1aWNqbzBORE5jTDI5aGRYUm9NbHd2ZEc5clpXNGlMQ0p5WldGc2JTSTZleUp6YVdkdWFXNW5YM1JsYm1GdWRDSTZJbU5oY21KdmJpNXpkWEJsY2lKOUxDSmxlSEFpT2pFM016TXhORGd6TXpBc0ltbGhkQ0k2TVRjek16RTBORGN6TUN3aWFuUnBJam9pTnpoallUQmtaV0V0TldNM1ppMDBaV0psTFRobVpUQXROakpoTVRKbE5tRmhaakUzSW4wLm1xVVVjRXVsY1lRa3pid1pBcWpVZ3A5MFZCbzEyLV8wdERSa0hVSUthQjg1VGVzbzgwRFZWbVlZNktKcFpuRzQ5SlN3TG1ESW1Od0RIZDlQcnU1eFdkc3pOY0tVX09WSW9JbjhzZ19IVTVpb3lkdGlGWEYzNW41Y1hNMmg3XzctM09fX1hYYWI3THFxazY0TDlYY1Jyb2ZwZ04wSnZyaC1oTGNRSG5SRC04aXBJVzlqVE9hYlZqVkoyMS1JNXR1Mi1RN05Sd0FwSm5hUHVJVnFUT2VnSF9jT29PTGtEcWtWR2VmVUc2WU4yWWlfWWVuTkNOd0ktc3ZTRnctUDNaeEdUUlZvYnhJUVRTWDRjeFdnQ3NVaTRwOFhHOHNmOURDOW9DVVJaekpBUFoxZXIzYlpMTmlHd3dmTnVOZGU5OGxGYWhYWmVBbmVBa2FJQnFaUjl3bzBYQSIsImNlcnRpZmljYXRlRGV0YWlscyI6eyJzZXJpYWxOdW1iZXIiOiI4MDg2ODUyNTU0MjI1OTg2MjM3IiwiaXNzdWVyRE4iOiJDTj1BQyBTQUZFV0VCIFJGQiB2NSwgT1U9U2VjcmV0YXJpYSBkYSBSZWNlaXRhIEZlZGVyYWwgZG8gQnJhc2lsIC0gUkZCLCBPPUlDUC1CcmFzaWwsIEM9QlIiLCJ2YWxpZFVudGlsIjoiMjAyNS0xMC0wMVQxNTowMToxMS0wMzAwIiwidmFsaWRGcm9tIjoiMjAyNC0xMC0wMVQxNTowMToxMS0wMzAwIiwidmVyc2lvbiI6IjMiLCJzdWJqZWN0RE4iOiJDTj1DQU5FTExBIEUgU0FOVE9TIENPTlRBQklMSURBREUgTFREQTowNjMxMDcxMTAwMDE0OSwgT1U9dmlkZW9jb25mZXJlbmNpYSwgT1U9NDg5MTU2NTAwMDAxOTMsIE9VPVJGQiBlLUNOUEogQTEsIE9VPVNlY3JldGFyaWEgZGEgUmVjZWl0YSBGZWRlcmFsIGRvIEJyYXNpbCAtIFJGQiwgTD1WT0xUQSBSRURPTkRBLCBTVD1SSiwgTz1JQ1AtQnJhc2lsLCBDPUJSIn0sImlwIjoiMTc3Ljk3LjAuNyIsInJvbGVzIjpbeyJpZCI6IlRFUkNFSVJPUyIsImRlc2MiOiJUZXJjZWlyb3MiLCJ0cmFucyI6WyJERUZBVUxUIl19XSwiaXNzIjoiU0FQSSIsImNwZiI6IjAxMjIzOTM4NzI3Iiwibm9tZSI6IkxFVkkgQ0FSVkFMSE8gQ0FORUxMQSIsImV4cCI6MTczMzE0ODMzMCwiaWF0IjoxNzMzMTQ0NzMwLCJkZXNjIjoiQ0FORUxMQSBFIFNBTlRPUyBDT05UQUJJTElEQURFIExUREEifQ.L58YO4lBxZgvaU2Y916NhtOtKBUYlHeZbFCk0HfpzIdRB9cepEpzrVrhwXppexAoPkYI8jEC3c9Aq_EO8lRoJ8FpbE2yZkhTe3Jil7iI2kVddZwxH2cRaIZEW2Hbi7C3qSLWNWjPpDYrPT338sG-hX4K1RVfnJu2OnEi-NpLM3NvyIs0wM7LLzghZRLbN4Sr1L2WJNF5pl52vdyXMWp5wFKHqTrEPkaSG-mFmtd6tMViD18AxqZ9FLt3MNLcTqKZFJ7KL3O2slO3NYw0JLwV5H68GNT2s36-Z6u9TfjIXAIXvOrCFX4_vj7QjXqHCr3eewN2AYVobNFEPnOygDrYHE7lEqeE_6QkJ3LI0FgegbMDQL1d1syfiOuvj7d6wxMP_z8mweqaMbxxNudVVorzbpP1To969DmCgMhnKLW4oqPQJYta5ukji7JDaMvOAM7Dr-83aZ2BeKLMW_Qbjpv0ZiNRgJzZTgQsWmPHFNZM47ZaamiJVI9rTp7GwCUyAGLYI9JG1f3-Qzsej2cK_RAejemBScTeRDmMtuYVOp_-wvAbZX3xvB0u9lVomCf5TPcZpGm2IDElJeUwbs_OeWlmOYH5T0MWD8fN0xBevW-zNLSRM-TMHqIGxrPN3W1rjBXJaHeexsjEuFHZ9O2tYlKC9-CrdzZBmIeqkPCe_GGDDdQ'; // Substitua pelo token JWT real

// Corpo da requisição
const requestBody = {
  contratante: {
    numero: "06310711000149",
    tipo: 2,
  },
  autorPedidoDados: {
    numero: "06310711000149",
    tipo: 2,
  },
  contribuinte: {
    numero: "01102834000170",
    tipo: 2,
  },
  pedidoDados: {
    idSistema: "SITFIS",
    idServico: "SOLICITARPROTOCOLO91",
    versaoSistema: "2.0",
    dados: ""
  },
};

async function makeRequest() {
  try {
    // Faz a requisição POST
    const response = await axios.post(API_URL, requestBody, {
      headers: {
        Authorization: `Bearer ${ACCESS_TOKEN}`,
        "Content-Type": "application/json",
        jwt_token: JWT_TOKEN,
      },
    });

    // Imprime a resposta
    console.log("Resposta da API:", response.data);
  } catch (error) {
    // Trata erros
    console.error("Erro na requisição:", error.response?.data || error.message);
  }
}

// Executa a função
makeRequest();
